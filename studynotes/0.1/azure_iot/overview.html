<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Azure IoT :: Tremorscript</title>
    <link rel="canonical" href="https://tremorscript.com/studynotes/0.1/azure_iot/overview.html">
    <meta name="generator" content="Antora 3.1.2">
    <link rel="stylesheet" href="../../../_/css/site.css">
    <script>var uiRootPath = '../../../_'</script>
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://tremorscript.com">Tremorscript</a>
      <div class="navbar-item search hide-for-print">
        <div id="search-field" class="field">
          <input id="search-input" type="text" placeholder="Search the docs">
        </div>
      </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="studynotes" data-version="0.1">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Study Notes</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Study Notes</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../FSharp/overview.html">FSharp Notes</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Computation Expressions</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../FSharp/LogBuilder.html">Log Builder</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../FSharp/MaybeBuilder.html">Maybe Builder</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../FSharp/OrElseBuilder.html">OrElse Builder</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../FSharp/IntroducingBind.html">Introducing Bind</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../FSharp/WrapperTypes.html">Wrapper Types</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../FSharp/WorkflowRulesForWrapperTypes.html">Rules for workflows that use wrapper types</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../FSharp/ComputationExpressionComposition.html">Composition of computation expression</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../FSharp/ListWrapperTypes.html">List Wrapper Types</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../FSharp/IdentityWrapperTypes.html">Identity Wrapper Types</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../FSharp/DoMethod.html">Do Method</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../FSharp/YieldMethod.html">Yield Method</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../FSharp/CombineMethod.html">Combine method</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../FSharp/DelayRunMethod.html">Delay and Run Method</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../Git/overview.html">Git Notes</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../Devops/devopsfordevelopers.html">Devops for Asp.Net Core developers</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="overview.html">Azure IoT</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Study Notes</span>
    <span class="version">0.1</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../../azurearchitecturestarterpack/1/index.html">Azure Architecture Starter Pack</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../azurearchitecturestarterpack/1/index.html">1-beta.1</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../homesite/1.0.0/index.html">Home page</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../homesite/1.0.0/index.html">1.0.0</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../../projectstarterpack/1.0.0/inline-text-formatting.html">New Project Starter Pack</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../../projectstarterpack/1.0.0/inline-text-formatting.html">1.0.0</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../index.html">Study Notes</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">0.1</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../homesite/1.0.0/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Study Notes</a></li>
    <li><a href="overview.html">Azure IoT</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/tremorscript/ReferenceGuides/edit/main/docs/modules/azure_iot/pages/overview.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Azure IoT</h1>
<div class="sect1">
<h2 id="_subsystems_of_iot"><a class="anchor" href="#_subsystems_of_iot"></a>Subsystems of IoT</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_core_subsystems"><a class="anchor" href="#_core_subsystems"></a>Core Subsystems</h3>
<div class="paragraph">
<p>An IoT solution architecture consists of the following subsystems:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Devices securely connecting to the cloud.</p>
</li>
<li>
<p>Devices sending and receiving data from the cloud.</p>
</li>
<li>
<p>A cloud gateway service, or hub, that provides device management capabilities.</p>
</li>
<li>
<p>The cloud gateway service, or hub, must securely accept data from the devices.</p>
</li>
<li>
<p>Stream processors consume data from the hub.</p>
</li>
<li>
<p>Stream processors also integrate with business processes.</p>
</li>
<li>
<p>They also place the data into storage.</p>
</li>
<li>
<p>A user interface to visualize telemetry data and facilitate device management.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Below diagram illustrates the core subsystems of IoT</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://learn.microsoft.com/en-us/training/wwl-azure/introduction-iot-solution-architecture/media/m01-l02-core-subsystems-iot-architecture-8158ad9e.png" alt="m01 l02 core subsystems iot architecture 8158ad9e">
</div>
<div class="title">Figure 1. Source: Microsoft Learn, Core Subsystems</div>
</div>
</div>
<div class="sect2">
<h3 id="_optional_subsystems"><a class="anchor" href="#_optional_subsystems"></a>Optional Subsystems</h3>
<div class="paragraph">
<p>Many IoT apps will include subsystems for the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>IoT Edge Devices</strong> to manage access and information flow</p>
</li>
<li>
<p>They may help with device provisioning, data filtering, batching and aggregation, buffering of data, protocol translation, event rules processing etc.</p>
</li>
<li>
<p><strong>Data Transformation Subsystem</strong> for manipulation and aggregation of the telemetry stream either before or after it is received by the cloud gateway service (the IoT hub).</p>
</li>
<li>
<p>Manipulation can include protocol transformation (for example, converting binary data to json) etc.</p>
</li>
<li>
<p><strong>Bulk Device Provisioning</strong> for deploying fleet of devices.</p>
</li>
<li>
<p><strong>User Management Subsystem</strong> for specifying groups and users who can perform action on devices (for example, updating firmware etc).</p>
</li>
<li>
<p><strong>ML Subsystem</strong> to learn from data and experiences and to act without being explicitly programmed.</p>
</li>
<li>
<p>Hot/warm/cold <strong>storage</strong> paths.</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="https://learn.microsoft.com/en-us/training/wwl-azure/introduction-iot-solution-architecture/media/m01-l02-optional-subsystems-iot-architecture-416c18f0.png" alt="m01 l02 optional subsystems iot architecture 416c18f0">
</div>
<div class="title">Figure 2. Source: Micorsoft Learn, Optional Subsystems</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_data_flow_and_processing"><a class="anchor" href="#_data_flow_and_processing"></a>Data flow and processing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There are four categories of stages (storage, routing, analysis, action/display):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Storage includes in-memory caches, temp queues and permanent archives(database).</p>
</li>
<li>
<p>Routing makes the decision on what data should go to which target and when. Targets include storage, analysis processes and action.</p>
</li>
<li>
<p>Analyis is used to run the data records through a set of conditions and can produce different output data records.</p>
</li>
<li>
<p>Original data records and post-analysis output data records are stored and available for display and may trigger actions such as sending email, sms etc.</p>
</li>
</ul>
</div>
<h3 id="_data_flow_scenarios" class="discrete">Data flow Scenarios</h3>
<div class="ulist">
<div class="title">Scenario 1</div>
<ul>
<li>
<p>Device sends data to IoT Hub.</p>
</li>
<li>
<p>IoT hub temporarily stores data.</p>
</li>
<li>
<p>This data is immediately displayed as a graph on-screen.</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="https://learn.microsoft.com/en-us/training/wwl-azure/introduction-iot-solution-architecture/media/m01-l02-data-flow-1-b3c3a3af.png" alt="m01 l02 data flow 1 b3c3a3af">
</div>
<div class="title">Figure 3. Source: Microsoft Learn</div>
</div>
<div class="ulist">
<div class="title">Scenario 2</div>
<ul>
<li>
<p>Device sends data to IoT Hub.</p>
</li>
<li>
<p>IoT hub temporarily stores data.</p>
</li>
<li>
<p>The data is then analyzed to detect anomalies, which can then be used to trigger actions such as sending email, text etc.</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="https://learn.microsoft.com/en-us/training/wwl-azure/introduction-iot-solution-architecture/media/m01-l02-data-flow-2-1385659c.png" alt="m01 l02 data flow 2 1385659c">
</div>
<div class="title">Figure 4. Source: Microsoft Learn</div>
</div>
<div class="ulist">
<div class="title">Scenario 3</div>
<ul>
<li>
<p>Some devices may connect directly to the cloud.</p>
</li>
<li>
<p>Some devices may store data on premise within field/edge gateways before sending it to the cloud.</p>
</li>
<li>
<p>Some legacy or constrained devices may use protocol translation provided by an edge gateway.</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="https://learn.microsoft.com/en-us/training/wwl-azure/introduction-iot-solution-architecture/media/m01-l02-data-flow-3-0a8e4444.png" alt="m01 l02 data flow 3 0a8e4444">
</div>
<div class="title">Figure 5. Source: Microsoft Learn</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_cross_cutting_architectural_needs"><a class="anchor" href="#_cross_cutting_architectural_needs"></a>Cross-cutting architectural needs</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Cross-cutting architectural needs:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Security Requirements</p>
</li>
<li>
<p>User Management and Auditing</p>
</li>
<li>
<p>Device Connectivity</p>
</li>
<li>
<p>In-transit Telemetry</p>
</li>
<li>
<p>At-rest Security</p>
</li>
<li>
<p>Logging and Monitoring for individual subsystems and the application</p>
</li>
<li>
<p>High Availability</p>
</li>
<li>
<p>Disaster Recovery</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="https://learn.microsoft.com/en-us/training/wwl-azure/introduction-iot-solution-architecture/media/m01-l02-cross-cutting-needs-subsystems-7d98fb39.png" alt="m01 l02 cross cutting needs subsystems 7d98fb39">
</div>
<div class="title">Figure 6. Source: Microsoft Learn</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_iot_hardware_componenents"><a class="anchor" href="#_iot_hardware_componenents"></a>IoT Hardware componenents</h2>
<div class="sectionbody">
<h3 id="_ip_enabled_iot_devices" class="discrete">IP-enabled IoT devices</h3>
<div class="paragraph">
<p>An IP-enabled device is, simply, a device that can establish a connection to a network and have a unique identity on that network.<br>
IP-enabled devices are deployed in scenarios where data needs to be collected, delivered, and analyzed in real-time, or periodically.</p>
</div>
<h3 id="_non_ip_enabled_devices" class="discrete">Non-IP enabled devices</h3>
<div class="paragraph">
<p>A device does not need to be directly IP-enabled in order to be part of the solution.<br>
They can connect to other devices like a field gateway (IoT Edge device).<br>
These devices can use protocols like CoAP5, OPC or technologies like Bluetooth, ZigBee to connect to other hardware.</p>
</div>
<h3 id="_sensors" class="discrete">Sensors</h3>
<div class="paragraph">
<p>A sensor is a circuit (or device) that collects a specific type of data about the physical environment.<br>
A <strong>smart sensor</strong> is a device that gathers input and processes that information locally before communicating message data.</p>
</div>
<h3 id="_iot_edge_devices_and_field_gateways" class="discrete">IoT Edge devices and field gateways</h3>
<div class="paragraph">
<p>A <strong>field gateway</strong> is a specialized device-appliance or a general-purpose software that:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>acts as a communication enabler.</p>
</li>
<li>
<p>may act as a local device control system and device data processing hub.</p>
</li>
<li>
<p>can perform local processing.</p>
</li>
<li>
<p>can control functions that are directed back towards the child devices that are connected to it.</p>
</li>
<li>
<p>can be used to filter or aggregate device telemetry.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The scope of a field gateway includes the field gateway itself and all devices that are attached to it.</p>
</div>
<div class="paragraph">
<p>Gateways may help with device provisioning, data filtering, batching and aggregation, buffering of data, protocol translation, and event processing rules.</p>
</div>
<div class="paragraph">
<p>NAT devices or firewalls do not qualify as field gateways since they are not explicit connection or session terminals, but rather route (or deny) connections or sessions made through them.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_review_azure_iot_technologies"><a class="anchor" href="#_review_azure_iot_technologies"></a>Review Azure IoT technologies</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_managed_apaas_solutions"><a class="anchor" href="#_managed_apaas_solutions"></a>Managed aPaaS solutions</h3>
<div class="paragraph">
<p>Application platform as a service (aPaas) provides a cloud environment to build, manage, and deliver applications to customers.</p>
</div>
<div class="paragraph">
<p>Azure IoT central is a fully managed, end-to-end ready made environment for IoT solution development.</p>
</div>
<div class="paragraph">
<p>It delivers built-in disaster recovery, multitenancy, global availability, and a predictable cost structure.</p>
</div>
</div>
<div class="sect2">
<h3 id="_flexible_paas_solutions"><a class="anchor" href="#_flexible_paas_solutions"></a>Flexible PaaS solutions</h3>
<div class="paragraph">
<p>You can tailor Azure hardware and software tools to a specific task or job function.<br>
You are responsible for scaling and configuration.<br>
The underlying infrastructure as a service (IaaS) is taken care for you.</p>
</div>
<div class="sect3">
<h4 id="_iot_edge_and_azure_sphere"><a class="anchor" href="#_iot_edge_and_azure_sphere"></a>IoT Edge and Azure Sphere</h4>
<div class="ulist">
<ul>
<li>
<p>Develop your <strong>IoT devices</strong> using one of the <strong>Azure IoT starter kits</strong> or choose a device to use from the <strong>Azure Certified for IoT device</strong> catalog.</p>
</li>
<li>
<p>SDKs are available for multiple programming languages.</p>
</li>
<li>
<p><strong>IoT Plug and Play</strong> can simplify how you create embedded code for your devices.</p>
</li>
<li>
<p><strong>Azure IoT Edge</strong> enables offloading parts of your workload from the cloud to the devices.</p>
</li>
<li>
<p>It can reduce latency, reduce the amount of data exchanged with the cloud, and enable offline scenarios.</p>
</li>
<li>
<p><strong>Azure Sphere</strong> is a secured, high-level app platform with built-in communication and security features for internet connected devices.</p>
</li>
<li>
<p>It includes a secured microcontroller unit, a custom linux-based operating system, and a cloud based security service which provides continuous, renewable security.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_iot_hub"><a class="anchor" href="#_iot_hub"></a>IoT Hub</h4>
<div class="paragraph">
<p><strong>IoT hub</strong> service enables reliable and secure bidirectional communications between millions of IoT devices and a cloud based solution.</p>
</div>
<div class="paragraph">
<p><strong>IoT Hub Device Provision System</strong> is a helper service that provides zero-touch, just-in-time provisioning of devices to the right IoT hub without requiring human intervention.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_azure_digital_twins"><a class="anchor" href="#_azure_digital_twins"></a>Azure Digital Twins</h3>
<div class="paragraph">
<p>IoT Central uses <strong>Azure Digital Twins</strong> to synchronize devices and data in the real world with the digital models that enable users to monitor and manage those connected devices.</p>
</div>
</div>
<div class="sect2">
<h3 id="_azure_stream_azure_data_explorer_and_azure_maps"><a class="anchor" href="#_azure_stream_azure_data_explorer_and_azure_maps"></a>Azure Stream, Azure Data Explorer and Azure Maps</h3>
<div class="paragraph">
<p><strong>Azure Stream Analytics</strong> and <strong>Azure Data Explorer</strong> can be used to process, query, analyze, and visualize data.</p>
</div>
<div class="paragraph">
<p><strong>Azure Maps</strong> is a collection of geospatial services that use fresh mapping data to provide accurate geographic context to web and mobile applications.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_iot_device_software_options"><a class="anchor" href="#_iot_device_software_options"></a>IoT device software options</h2>
<div class="sectionbody">
<div class="paragraph">
<p>IoT devices need to run code to be useful.</p>
</div>
<div class="paragraph">
<p>Device operating system options:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Windows 10 IoT enterprise (Managed)</p>
</li>
<li>
<p>Ubuntu Core (Open source)</p>
</li>
<li>
<p>Riot (Open source)</p>
</li>
<li>
<p>QNX (managed)</p>
</li>
<li>
<p>Android Automative (managed)</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_cloud_service_components_of_an_iot_solution"><a class="anchor" href="#_cloud_service_components_of_an_iot_solution"></a>Cloud service components of an IoT solution</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_cloud_gateways"><a class="anchor" href="#_cloud_gateways"></a>Cloud Gateways</h3>
<div class="paragraph">
<p>A cloud gateway enables you to manage your IoT devices and brokers the communication with other cloud services.</p>
</div>
<div class="paragraph">
<p>Cloud gateways can provide workloads such as:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Authentication and Authorization</p>
</li>
<li>
<p>Message brokering</p>
</li>
<li>
<p>Data storage and filtering</p>
</li>
<li>
<p>Data analytics</p>
</li>
<li>
<p>Functions (discrete code blocks that perform specific tasks)</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="https://learn.microsoft.com/en-us/training/wwl-azure/examine-components-iot-solution/media/m01-l03-cloud-gateway-6a9bb3cb.png" alt="m01 l03 cloud gateway 6a9bb3cb">
</div>
<div class="title">Figure 7. Source Microsoft Learn</div>
</div>
<h3 id="_data_storage_options" class="discrete">Data storage options</h3>
<div class="paragraph">
<p>Data is often time-series data. It is common to split data into "warm" and "cold" data stores.<br>
The <strong>warm data</strong> holds recent data that needs to be accessed with low latency.<br>
You can decide the duration range (for example, the last day, week, or month)<br>
Data stored in <strong>cold storage</strong> is historical data.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://learn.microsoft.com/en-us/training/wwl-azure/examine-components-iot-solution/media/m01-l03-warm-cold-storage-68f98297.png" alt="m01 l03 warm cold storage 68f98297">
</div>
<div class="title">Figure 8. Source Microsoft Learn</div>
</div>
</div>
<div class="sect2">
<h3 id="_analytics"><a class="anchor" href="#_analytics"></a>Analytics</h3>
<div class="paragraph">
<p>Without analytics, data collected from IoT would be too voluminous and unstructured to visualize or gain insights.<br>
Analytic services enable architects to build meaningful relationships between sets of data in order to make it easier to manage.</p>
</div>
</div>
<div class="sect2">
<h3 id="_data_visualization"><a class="anchor" href="#_data_visualization"></a>Data visualization</h3>
<div class="paragraph">
<p>Data visualization tools can take input from various data streams and combine them into "dashboards" that can be used to tell a story about the data that was collected.<br>
Ultimately, getting more out of your data is the goal of IoT.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_iot_hub_2"><a class="anchor" href="#_iot_hub_2"></a>IoT Hub</h2>
<div class="sectionbody">
<div class="paragraph">
<p>IoT Hub is a managed service that acts as a central message hub for bi-directional communication between your IoT application and the devices it manages.</p>
</div>
<div class="paragraph">
<p>IoT Hub gives you a secure communication channel for your devices to send data</p>
</div>
<div class="ulist">
<ul>
<li>
<p>per-device authentication enables each device to connect securely to IoT hub and be managed securely by IoT hub.</p>
</li>
<li>
<p>You can control user device access and per-device level connection.</p>
</li>
<li>
<p>IoT Hub Device Provisioning Service automatically provisions devices to the correct IoT Hub when the device first boots up.</p>
</li>
<li>
<p>Multiple authentication types:</p>
<div class="ulist">
<ul>
<li>
<p>SAS token-based authentication.</p>
</li>
<li>
<p>Individual X.509 certificate authentication for secure, standards-based authentication.</p>
</li>
<li>
<p>X.509 CA authentication for simple, standards-based enrollment.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>IoT Hub can scale to millions of devices and can handle millions of events per second.</p>
</div>
<div class="paragraph">
<p>IoT Hub has <strong>built-in routing</strong> and can setup automatic, rules-based message fan-out:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use message routing to control where your hub sends device telemetry.</p>
</li>
<li>
<p>Can route messages to multiple endpoints at no extra cost.</p>
</li>
<li>
<p>No-code routing rules instead of writing custom message dispatcher code.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>IoT Hub can integrate with other services:-</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Azure Event Grid to help your business to quickly react to critical events.</p>
</li>
<li>
<p>Azure Logic Apps to automate business processes.</p>
</li>
<li>
<p>Azure Machine Learning to add machine learning and AI models.</p>
</li>
<li>
<p>Azure Stream Analytics to run real-time analytic computations on the data.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>IoT Hub can manage your devices:-</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Store, synchronize, and query device metadata and state information for all your devices.</p>
</li>
<li>
<p>Set device state either per-device or based on some common characteristic.</p>
</li>
<li>
<p>Automatically respond to a device-reported state change.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Use Azure IoT device SDK libraries to build applications that run on your devices and interact with IoT Hub.</p>
</div>
<div class="paragraph">
<p>There is a limit of 50 IoT hubs per subscription. You can request quota increases by contacting support.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_device_provisioning_service"><a class="anchor" href="#_device_provisioning_service"></a>Device Provisioning Service</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Provisioning is a two part process:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The first part is establishing the initial connection between the device and the IoT solution by registering the device.</p>
</li>
<li>
<p>The second part is applying the proper configuration to the device based on the requirements of the solution it was registered to.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Features:-</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Secure attestation support for both X.509 and TPM-based identities</p>
</li>
<li>
<p>Multiple allocation policies to control how the DPS assigns devices to IoT hubs.</p>
</li>
<li>
<p>Monitoring and diagnostic logging</p>
</li>
<li>
<p>Mult-hub support allows DPS to assign devices to more than one IoT hub across subscriptions.</p>
</li>
<li>
<p>Cross-region support to assign devices in other regions.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When to use:-</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Zero-touch provisioning to an IoT solution without hardcoding IoT Hub connection.</p>
</li>
<li>
<p>Load-balancing devices across multiple hubs.</p>
</li>
<li>
<p>Connecting devices to a particular IoT solution depending on use case.</p>
</li>
<li>
<p>Connecting a device to the IoT hub with the lowest latency.</p>
</li>
<li>
<p>Reprovisioning based on a change in the device.</p>
</li>
<li>
<p>Rolling the keys used by the device to connect to IoT Hub.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_iot_hub_properties"><a class="anchor" href="#_iot_hub_properties"></a>IoT Hub properties</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_iot_hub_tiers"><a class="anchor" href="#_iot_hub_tiers"></a>IoT Hub Tiers</h3>
<div class="paragraph">
<p>To evaluate which IoT Hub tier is right for you solution, consider the following two questions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>What features do I plan to use?</p>
</li>
<li>
<p>How much data do I plan to move daily?</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_basic_tier"><a class="anchor" href="#_basic_tier"></a>Basic Tier</h4>
<div class="paragraph">
<p>The basic tier enables a subset of features and is intended for IoT solutions that only need uni-directional communication from devices to the cloud.<br>
If your IoT solution is based around collecting data from devices and analyzing it centrally, then the basic tier is probably right for you.</p>
</div>
</div>
<div class="sect3">
<h4 id="_standard_tier"><a class="anchor" href="#_standard_tier"></a>Standard Tier</h4>
<div class="paragraph">
<p>The standard tier of IoT Hubs enables all features, and is required for any IoT solutions that want to make use of the bi-directional communication capabilities.<br>
If you would like to control IoT devices remotely or distribute some of your workloads onto the devices themselves, then you should consider the standard tier.</p>
</div>
</div>
<div class="sect3">
<h4 id="_message_throughtput"><a class="anchor" href="#_message_throughtput"></a>Message throughtput</h4>
<div class="paragraph">
<p>Message traffic is measured for your IoT hub on a per-unit basis.<br>
When you create an IoT hub, you choose its tier and edition, and set the number of units available.<br>
You can purchase up to 200 units for the B1, B2, S1, or S2 edition, or up to 10 units for the B3 or S3 edition.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Tier edition</th>
<th class="tableblock halign-left valign-top">Sustained throughput</th>
<th class="tableblock halign-left valign-top">Sustained send rate</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">B1, S1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Up to 1111 KB/minute per unit (1.5 GB/day/unit)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Average of 278 messages/minute per unit (400,000 messages/day per unit)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">B2, S2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Up to 16 MB/minute per unit (22.8 GB/day/unit)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Average of 4,167 messages/minute per unit (6 million messages/day per unit)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">B3, S3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Up to 814 MB/minute per unit (1144.4 GB/day/unit)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Average of 208,333 messages/minute per unit (300 million messages/day per unit)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_partitions"><a class="anchor" href="#_partitions"></a>Partitions</h4>
<div class="paragraph">
<p>Partions can be used to reduce contentions that could occur when concurrently reading and writing to event streams.<br>
The partition limit is chosen when IoT hub is created.<br>
The maximum partition limit is 32 but most IoT hubs only need 4 partitions.<br>
The number of partitions is directly related to the number of concurrent readers you expect to have.</p>
</div>
<div class="paragraph">
<p>The default value of four partitions should be used unless specified by the architect.</p>
</div>
</div>
<div class="sect3">
<h4 id="_tier_upgrade"><a class="anchor" href="#_tier_upgrade"></a>Tier upgrade</h4>
<div class="paragraph">
<p>You can upgrade from the basic tier to the standard tier without interrupting your existing operations.
You cannot downgrade to a lower tier. You can move from S2 to S1 but not from S1 to B1 tier.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_iot_hub_endpoints"><a class="anchor" href="#_iot_hub_endpoints"></a>IoT Hub endpoints</h3>
<div class="paragraph">
<p>An endpoint is a service that can retrieve data from other services.<br>
Examples of endpoint types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Device-facing endpoints</strong> that enables devices to perform operations such as sending device-to-cloud messages and receiving cloud-to-device messages.</p>
</li>
<li>
<p><strong>Service-facing management endpoints</strong> that enable back-end apps to perform operations such as device identity management and device twin management.</p>
</li>
<li>
<p><strong>Service facing built-in endpoints</strong> for reading device-to-cloud messages.</p>
</li>
<li>
<p><strong>Custom endpoints</strong> to receive device-to-cloud messages dispatched by a routing rule.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_built_in_endpoints"><a class="anchor" href="#_built_in_endpoints"></a>Built-in endpoints</h4>
<div class="imageblock">
<div class="content">
<img src="https://learn.microsoft.com/en-us/training/wwl-azure/examine-iot-hub-properties/media/m02-l04-iot-hub-endpoints-413257e2.png" alt="m02 l04 iot hub endpoints 413257e2">
</div>
<div class="title">Figure 9. Source Microsoft Learn</div>
</div>
<div class="paragraph">
<p>The IoT hub endpoints:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Resource provider</strong>. It exposes an Azure Resource Manager interface. This interface enables Azure subscription owners to create and delete IoT hubs, and to update IoT hub properties.</p>
</li>
<li>
<p><strong>Device identity management</strong>. A set of HTTPS REST endpoints to manage device identities. Device identities are used for device authentication and access control.</p>
</li>
<li>
<p><strong>Device twin management</strong>. A set of HTTPS REST endpoints to query and update device twins.</p>
</li>
<li>
<p><strong>Jobs management</strong> HTTS REST endpoint to query and manage jobs.</p>
</li>
<li>
<p><strong>Device endpoints</strong>. For each device, a set of endpoints are exposed</p>
<div class="ulist">
<ul>
<li>
<p>Send device-to-cloud messages</p>
</li>
<li>
<p>Receive cloud-to-device messages</p>
</li>
<li>
<p>Initiate file uploads - a device uses this endpoint to receive an Azure storage SAS URI from IoT Hub to upload a file.</p>
</li>
<li>
<p>Retrieve and update device twin properties.</p>
</li>
<li>
<p>Receive direct method requests.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Service endpoints</strong>. Exposes a set of endpoints for your solution back end to communicate with your devices. With one exception, these endpoints are only exposed using the AMQP protocols. The method invocation endpoint is exposed over the HTTPS protocol.</p>
<div class="ulist">
<ul>
<li>
<p>Receive device-to-cloud messages.</p>
</li>
<li>
<p>Send cloud-to-device messages and receive delivery acknowledgements.</p>
</li>
<li>
<p>Receive file notifications.</p>
</li>
<li>
<p>Direct method invocation.</p>
</li>
<li>
<p>Receive operation monitoring events.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_custom_endpoints"><a class="anchor" href="#_custom_endpoints"></a>Custom endpoints</h4>
<div class="paragraph">
<p>These endpoints act as service endpoints and are used as sinks for message routes.<br>
Devices cannot write directly to these custom endpoints.</p>
</div>
<div class="paragraph">
<p>The following services are supported as custom endpoints.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Azure Storage containers</p>
</li>
<li>
<p>Event Hubs</p>
</li>
<li>
<p>Service Bus Queues</p>
</li>
<li>
<p>Service Bus Topics</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_security_concepts"><a class="anchor" href="#_security_concepts"></a>Security Concepts</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There are three different ways for controlling access to IoT Hub:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Azure AD</strong>. It provides identity-based authentication and fine-grained authorization with Azure RBAC. It supports only IoT hub service api&#8217;s.</p>
</li>
<li>
<p><strong>SAS</strong>. It lets you group permissions and grant them to applications using access keys and signed security tokens.</p>
</li>
<li>
<p><strong>Per-device security credentials</strong>. Each IoT Hub contains an identity registry. For each device in this registry, you can configure security credentials that grant DeviceConnect permissions scoped to the device&#8217;s endpoints.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_access_control_and_permissions"><a class="anchor" href="#_access_control_and_permissions"></a>Access Control and Permissions</h3>
<div class="paragraph">
<p>Use shared access policies for IoT hub-level access.<br>
Use the individual device credentials to scope access to that device only.</p>
</div>
</div>
<div class="sect2">
<h3 id="_authentication"><a class="anchor" href="#_authentication"></a>Authentication</h3>
<div class="paragraph">
<p>Azure IoT hub grants access to endpoints by verifying a token against the shared access policies and identity registry security credentials.</p>
</div>
</div>
<div class="sect2">
<h3 id="_security_tokens"><a class="anchor" href="#_security_tokens"></a>Security tokens</h3>
<div class="paragraph">
<p>IoT Hub uses security tokens to authenticate devices and services to avoid sending keys on the wire.<br>
Security tokens are limited in time validity and scope.<br>
Some scenarios do require you to use security tokens directly. Example:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The direct use of the MQTT, AMQP, or HTTPS surfaces.</p>
</li>
<li>
<p>The implementation of the token service pattern.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>IoT hub also allows devices to authenticate with IoT Hub using X.509 certificates.</p>
</div>
</div>
<div class="sect2">
<h3 id="_supported_x_509_certificates"><a class="anchor" href="#_supported_x_509_certificates"></a>Supported X.509 certificates</h3>
<div class="paragraph">
<p>You can verify using X.509 certificates by uploading either a certificate thumbprint or a certificate authority(CA) to Azure IoT Hub.<br>
Authentication using certificate thumbprints only verifies that the presented thumbprint matches the configured thumbprint.<br>
Authentication using certificate authority validates the certificate chain.</p>
</div>
<div class="paragraph">
<p>Supported Certificates include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>An existing X.509 certificate. A device may already have a certificate that it can then use to authenticate. Works with either thumbprint or CA authentication.</p>
</li>
<li>
<p>CA-signed X.509 certificate. You can use a Certificate Authority signed certificate. Works with either thumbprint or CA authentication.</p>
</li>
<li>
<p>A self generated and self-signed X.509 certificate. A device manufacturer or in-house deployer can generate these certificates and store the corresponding private key (and certificate) on the device. You can use tools such as OpenSSL and Windows SelfSignedCertificate utility for this purpose. Only works with thumbprint authentication.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A device may either use an X.509 certificate or a security token for authentication, but not both.</p>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
<script src="../../../_/js/vendor/lunr.js"></script>
<script src="../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../.." data-snippet-length="100" data-stylesheet="../../../_/css/search.css"></script>
<script async src="../../../search-index.js"></script>
  </body>
</html>
